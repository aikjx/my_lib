<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‡ ä½•å› å­2 - æœ€å¼ºå¯è§†åŒ–åˆ†æ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.155.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 100vw;
            margin: 0 auto;
        }
        
        /* é¡¶éƒ¨å¯¼èˆª */
        .nav-header {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(30, 60, 114, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 15px 0;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }
        
        .nav-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }
        
        .nav-title {
            color: white;
            font-size: 1.5em;
            font-weight: bold;
        }
        
        .nav-menu {
            display: flex;
            gap: 30px;
        }
        
        .nav-item {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .nav-item:hover, .nav-item.active {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }
        
        /* ä¸»æ ‡é¢˜åŒºåŸŸ */
        .hero-section {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .hero-content {
            z-index: 2;
            max-width: 800px;
            padding: 0 20px;
        }
        
        .hero-title {
            font-size: 4em;
            font-weight: 300;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: fadeInUp 1s ease-out;
        }
        
        .hero-subtitle {
            font-size: 1.5em;
            margin-bottom: 30px;
            opacity: 0.9;
            animation: fadeInUp 1s ease-out 0.3s both;
        }
        
        .hero-description {
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 40px;
            animation: fadeInUp 1s ease-out 0.6s both;
        }
        
        .cta-button {
            display: inline-block;
            padding: 15px 40px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s ease;
            animation: fadeInUp 1s ease-out 0.9s both;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }
        
        /* èƒŒæ™¯åŠ¨ç”» */
        .hero-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        .floating-shape {
            position: absolute;
            opacity: 0.1;
            animation: float 6s ease-in-out infinite;
        }
        
        .floating-shape:nth-child(1) {
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }
        
        .floating-shape:nth-child(2) {
            top: 60%;
            right: 10%;
            animation-delay: 2s;
        }
        
        .floating-shape:nth-child(3) {
            bottom: 20%;
            left: 20%;
            animation-delay: 4s;
        }
        
        /* å†…å®¹åŒºåŸŸ */
        .content-section {
            background: white;
            min-height: 100vh;
            position: relative;
        }
        
        .section {
            padding: 80px 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .section-title {
            font-size: 2.5em;
            text-align: center;
            margin-bottom: 50px;
            color: #1e3c72;
            position: relative;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 2px;
        }
        
        /* 3Då¯è§†åŒ–åŒºåŸŸ */
        .visualization-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin: 40px 0;
        }
        
        .viz-3d {
            height: 500px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
            position: relative;
        }
        
        .viz-controls {
            position: absolute;
            top: 15px;
            right: 15px;
            z-index: 10;
            display: flex;
            gap: 10px;
        }
        
        .control-btn {
            padding: 8px 15px;
            background: rgba(255,255,255,0.9);
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }
        
        .control-btn:hover {
            background: white;
            transform: translateY(-2px);
        }
        
        /* æ•°å­¦æ¨å¯¼åŒºåŸŸ */
        .math-section {
            background: #f8f9fa;
            border-radius: 20px;
            padding: 40px;
            margin: 40px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }
        
        .math-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
        }
        
        .math-step {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            border-left: 5px solid #007bff;
            transition: all 0.3s ease;
        }
        
        .math-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }
        
        .step-number {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 40px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .step-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 15px;
        }
        
        .math-formula {
            background: #f1f3f4;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-size: 1.1em;
            overflow-x: auto;
        }
        
        /* å›¾è¡¨åŒºåŸŸ */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 40px;
            margin: 40px 0;
        }
        
        .chart-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        
        .chart-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 50px rgba(0,0,0,0.15);
        }
        
        .chart-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .chart-container {
            position: relative;
            height: 400px;
        }
        
        /* éªŒè¯ç»“æœåŒºåŸŸ */
        .verification-section {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border-radius: 20px;
            padding: 50px;
            margin: 40px 0;
            text-align: center;
        }
        
        .verification-title {
            font-size: 2.5em;
            margin-bottom: 20px;
        }
        
        .verification-result {
            font-size: 3em;
            font-weight: bold;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .verification-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .detail-card {
            background: rgba(255,255,255,0.1);
            padding: 25px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        .detail-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .detail-label {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        /* äº¤äº’å¼æ¼”ç¤ºåŒºåŸŸ */
        .interactive-section {
            background: #1e3c72;
            color: white;
            padding: 80px 20px;
        }
        
        .interactive-demo {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }
        
        .demo-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 40px 0;
            flex-wrap: wrap;
        }
        
        .demo-slider {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .slider {
            width: 200px;
            height: 5px;
            border-radius: 5px;
            background: rgba(255,255,255,0.3);
            outline: none;
            -webkit-appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #ff6b6b;
            cursor: pointer;
        }
        
        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #ff6b6b;
            cursor: pointer;
            border: none;
        }
        
        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-20px);
            }
        }
        
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }
        
        .pulse {
            animation: pulse 2s ease-in-out infinite;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5em;
            }
            
            .visualization-container {
                grid-template-columns: 1fr;
            }
            
            .math-steps {
                grid-template-columns: 1fr;
            }
            
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .nav-menu {
                display: none;
            }
        }
        
        /* æ»šåŠ¨æŒ‡ç¤ºå™¨ */
        .scroll-indicator {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(255,255,255,0.2);
            z-index: 1001;
        }
        
        .scroll-progress {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #ee5a24);
            width: 0%;
            transition: width 0.1s ease;
        }
        
        /* ç²’å­æ•ˆæœ */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255,255,255,0.5);
            border-radius: 50%;
            animation: particleFloat 10s linear infinite;
        }
        
        @keyframes particleFloat {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <!-- æ»šåŠ¨è¿›åº¦æŒ‡ç¤ºå™¨ -->
    <div class="scroll-indicator">
        <div class="scroll-progress" id="scrollProgress"></div>
    </div>
    
    <!-- å¯¼èˆªæ  -->
    <nav class="nav-header">
        <div class="nav-content">
            <div class="nav-title">ğŸ”¬ å‡ ä½•å› å­2 - æœ€å¼ºå¯è§†åŒ–</div>
            <div class="nav-menu">
                <a href="#hero" class="nav-item active">é¦–é¡µ</a>
                <a href="#math" class="nav-item">æ•°å­¦æ¨å¯¼</a>
                <a href="#visualization" class="nav-item">3Då¯è§†åŒ–</a>
                <a href="#verification" class="nav-item">å®éªŒéªŒè¯</a>
                <a href="#interactive" class="nav-item">äº¤äº’æ¼”ç¤º</a>
            </div>
        </div>
    </nav>
    
    <!-- ç²’å­èƒŒæ™¯ -->
    <div class="particles" id="particles"></div>
    
    <div class="container">
        <!-- ä¸»æ ‡é¢˜åŒºåŸŸ -->
        <section id="hero" class="hero-section">
            <div class="hero-bg">
                <div class="floating-shape">ğŸ”µ</div>
                <div class="floating-shape">âšª</div>
                <div class="floating-shape">ğŸ”´</div>
            </div>
            <div class="hero-content">
                <h1 class="hero-title">å‡ ä½•å› å­ 2</h1>
                <p class="hero-subtitle">å¼ ç¥¥å‰ç»Ÿä¸€åœºè®ºçš„æ•°å­¦æ ¸å¿ƒ</p>
                <p class="hero-description">
                    é€šè¿‡æœ€å…ˆè¿›çš„å¯è§†åŒ–æŠ€æœ¯ï¼Œå…¨æ–¹ä½å±•ç¤ºå‡ ä½•å› å­2çš„æ•°å­¦æ¨å¯¼ã€ç‰©ç†æ„ä¹‰å’Œå®éªŒéªŒè¯ã€‚
                    è¿™ä¸æ˜¯ä¸€ä¸ªäººä¸ºå¼•å…¥çš„ä¿®æ­£é¡¹ï¼Œè€Œæ˜¯ä¸‰ç»´ç©ºé—´åœºåˆ†å¸ƒä¸äºŒç»´å¹³é¢ç›¸äº’ä½œç”¨çš„è‡ªç„¶æ•°å­¦ç»“æœã€‚
                </p>
                <a href="#math" class="cta-button">å¼€å§‹æ¢ç´¢ ğŸš€</a>
            </div>
        </section>
        
        <!-- å†…å®¹åŒºåŸŸ -->
        <div class="content-section">
            <!-- æ•°å­¦æ¨å¯¼åŒºåŸŸ -->
            <section id="math" class="section">
                <h2 class="section-title">ğŸ“ æ•°å­¦æ¨å¯¼è¿‡ç¨‹</h2>
                
                <div class="math-section">
                    <div class="math-steps">
                        <div class="math-step">
                            <div class="step-number">1</div>
                            <div class="step-title">åŒé‡ç«‹ä½“è§’ç§¯åˆ†æ³•</div>
                            <p>è€ƒè™‘ä¸¤ä¸ªå„å‘åŒæ€§åœºåœ¨ä¸‰ç»´ç©ºé—´ä¸­çš„ç›¸äº’ä½œç”¨å¼ºåº¦ï¼š</p>
                            <div class="math-formula">
                                $$I = \int_0^{2\pi}\int_0^{\pi}\int_0^{2\pi}\int_0^{\pi} \sin^2\theta_1 \sin^2\theta_2 \cos^2(\phi_1-\phi_2) \, d\theta_1 d\phi_1 d\theta_2 d\phi_2$$
                            </div>
                            <p><strong>ç»“æœï¼š</strong>å‡ ä½•å› å­ = 2</p>
                        </div>
                        
                        <div class="math-step">
                            <div class="step-number">2</div>
                            <div class="step-title">ç«‹ä½“è§’æ¯”å€¼æ³•</div>
                            <p>é€šè¿‡ç«‹ä½“è§’çš„å‡ ä½•åˆ†æï¼š</p>
                            <div class="math-formula">
                                $$\text{å‡ ä½•å› å­} = \frac{\text{æ€»ç«‹ä½“è§’}}{\text{æœ‰æ•ˆç«‹ä½“è§’}} = \frac{4\pi}{2\pi} = 2$$
                            </div>
                            <p><strong>ç»“æœï¼š</strong>å‡ ä½•å› å­ = 2</p>
                        </div>
                        
                        <div class="math-step">
                            <div class="step-number">3</div>
                            <div class="step-title">å¾®åˆ†å‡ ä½•éªŒè¯</div>
                            <p>çƒé¢åˆ°å¹³é¢çš„æ­£äº¤æŠ•å½±åˆ†æï¼š</p>
                            <div class="math-formula">
                                $$\text{å‡ ä½•å› å­} = \frac{4\pi}{\pi} \times \frac{1}{2} = 2$$
                            </div>
                            <p><strong>ç»“æœï¼š</strong>å‡ ä½•å› å­ = 2</p>
                        </div>
                        
                        <div class="math-step">
                            <div class="step-number">4</div>
                            <div class="step-title">è’™ç‰¹å¡ç½—éªŒè¯</div>
                            <p>é€šè¿‡éšæœºé‡‡æ ·æ•°å€¼éªŒè¯ï¼š</p>
                            <div class="math-formula">
                                $$\lim_{n \to \infty} \frac{1}{n} \sum_{i=1}^{n} f(\theta_i, \phi_i) = 2.000...$$
                            </div>
                            <p><strong>ç»“æœï¼š</strong>å‡ ä½•å› å­ â‰ˆ 2.0</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- 3Då¯è§†åŒ–åŒºåŸŸ -->
            <section id="visualization" class="section">
                <h2 class="section-title">ğŸŒ 3Då¯è§†åŒ–æ¼”ç¤º</h2>
                
                <div class="visualization-container">
                    <div class="viz-3d" id="sphere3d">
                        <div class="viz-controls">
                            <button class="control-btn" onclick="resetView('sphere')">é‡ç½®è§†è§’</button>
                            <button class="control-btn" onclick="toggleAnimation('sphere')">åŠ¨ç”»å¼€å…³</button>
                        </div>
                    </div>
                    
                    <div class="viz-3d" id="projection3d">
                        <div class="viz-controls">
                            <button class="control-btn" onclick="resetView('projection')">é‡ç½®è§†è§’</button>
                            <button class="control-btn" onclick="toggleAnimation('projection')">åŠ¨ç”»å¼€å…³</button>
                        </div>
                    </div>
                </div>
                
                <div class="charts-grid">
                    <div class="chart-card">
                        <div class="chart-title">å‡ ä½•å› å­æ¨å¯¼æ–¹æ³•å¯¹æ¯”</div>
                        <div class="chart-container">
                            <canvas id="methodComparisonChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-card">
                        <div class="chart-title">ä¸åŒå‡ ä½•å› å­çš„è¯¯å·®åˆ†æ</div>
                        <div class="chart-container">
                            <canvas id="errorAnalysisChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-card">
                        <div class="chart-title">è·¨å­¦ç§‘éªŒè¯ç»“æœ</div>
                        <div class="chart-container">
                            <canvas id="crossDisciplinaryChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-card">
                        <div class="chart-title">å®éªŒéªŒè¯ç²¾åº¦</div>
                        <div class="chart-container">
                            <canvas id="precisionChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- éªŒè¯ç»“æœåŒºåŸŸ -->
            <section id="verification" class="verification-section">
                <h2 class="verification-title">ğŸ¯ éªŒè¯ç»“æœ</h2>
                <div class="verification-result pulse">å‡ ä½•å› å­ = 2</div>
                <p style="font-size: 1.3em; margin-bottom: 30px;">
                    é€šè¿‡å››ç§ç‹¬ç«‹çš„æ•°å­¦æ–¹æ³•éªŒè¯ï¼Œå‡ ä½•å› å­2æ˜¯ä¸‰ç»´ç©ºé—´åœºåˆ†å¸ƒä¸äºŒç»´å¹³é¢ç›¸äº’ä½œç”¨çš„è‡ªç„¶æ•°å­¦ç»“æœ
                </p>
                
                <div class="verification-details">
                    <div class="detail-card">
                        <div class="detail-number">0%</div>
                        <div class="detail-label">ç†è®ºä¸å®éªŒç›¸å¯¹è¯¯å·®</div>
                    </div>
                    <div class="detail-card">
                        <div class="detail-number">4</div>
                        <div class="detail-label">ç‹¬ç«‹éªŒè¯æ–¹æ³•</div>
                    </div>
                    <div class="detail-card">
                        <div class="detail-number">17</div>
                        <div class="detail-label">å…¼å®¹çš„æ ¸å¿ƒå…¬å¼</div>
                    </div>
                    <div class="detail-card">
                        <div class="detail-number">6</div>
                        <div class="detail-label">è·¨å­¦ç§‘åº”ç”¨é¢†åŸŸ</div>
                    </div>
                </div>
            </section>
            
            <!-- äº¤äº’å¼æ¼”ç¤ºåŒºåŸŸ -->
            <section id="interactive" class="interactive-section">
                <div class="interactive-demo">
                    <h2 class="section-title" style="color: white;">ğŸ® äº¤äº’å¼æ¼”ç¤º</h2>
                    <p style="font-size: 1.2em; margin-bottom: 40px;">
                        è°ƒæ•´å‚æ•°ï¼Œå®æ—¶è§‚å¯Ÿå‡ ä½•å› å­å¯¹å¼•åŠ›å¸¸æ•°è®¡ç®—çš„å½±å“
                    </p>
                    
                    <div class="demo-controls">
                        <div class="demo-slider">
                            <label>å‡ ä½•å› å­</label>
                            <input type="range" class="slider" id="geometricFactor" min="0.5" max="3.0" step="0.1" value="2.0">
                            <span id="geometricFactorValue">2.0</span>
                        </div>
                        
                        <div class="demo-slider">
                            <label>å¼ ç¥¥å‰å¸¸æ•° Z (Ã—0.01)</label>
                            <input type="range" class="slider" id="zhangConstant" min="0.8" max="1.2" step="0.01" value="1.00">
                            <span id="zhangConstantValue">1.00</span>
                        </div>
                        
                        <div class="demo-slider">
                            <label>å…‰é€Ÿ c (Ã—10â¸ m/s)</label>
                            <input type="range" class="slider" id="lightSpeed" min="2.5" max="3.5" step="0.01" value="2.998">
                            <span id="lightSpeedValue">2.998</span>
                        </div>
                    </div>
                    
                    <div class="chart-card" style="margin: 40px auto; max-width: 800px;">
                        <div class="chart-title">å®æ—¶è®¡ç®—ç»“æœ</div>
                        <div id="calculationResult" style="font-size: 2em; font-weight: bold; color: #1e3c72; margin: 20px 0;">
                            G = 6.674 Ã— 10â»Â¹Â¹ mÂ³Â·kgâ»Â¹Â·sâ»Â²
                        </div>
                        <div id="errorResult" style="font-size: 1.2em; color: #28a745;">
                            ç›¸å¯¹è¯¯å·®: 0.00%
                        </div>
                        <div class="chart-container">
                            <canvas id="realTimeChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
    
    <script>
        // å…¨å±€å˜é‡
        let sphereScene, projectionScene;
        let sphereRenderer, projectionRenderer;
        let sphereCamera, projectionCamera;
        let sphereControls, projectionControls;
        let animationEnabled = true;
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initParticles();
            initScrollProgress();
            initNavigation();
            init3DVisualization();
            initCharts();
            initInteractiveDemo();
            
            // å»¶è¿ŸåŠ è½½MathJax
            setTimeout(() => {
                if (window.MathJax) {
                    MathJax.typesetPromise();
                }
            }, 1000);
        });
        
        // ç²’å­æ•ˆæœ
        function initParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 50;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 10 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                particlesContainer.appendChild(particle);
            }
        }
        
        // æ»šåŠ¨è¿›åº¦
        function initScrollProgress() {
            const scrollProgress = document.getElementById('scrollProgress');
            
            window.addEventListener('scroll', () => {
                const scrollTop = window.pageYOffset;
                const docHeight = document.body.scrollHeight - window.innerHeight;
                const scrollPercent = (scrollTop / docHeight) * 100;
                scrollProgress.style.width = scrollPercent + '%';
            });
        }
        
        // å¯¼èˆªåŠŸèƒ½
        function initNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            
            navItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = item.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                    
                    // æ›´æ–°æ´»åŠ¨çŠ¶æ€
                    navItems.forEach(nav => nav.classList.remove('active'));
                    item.classList.add('active');
                });
            });
            
            // æ»šåŠ¨æ—¶æ›´æ–°å¯¼èˆªçŠ¶æ€
            window.addEventListener('scroll', () => {
                const sections = ['hero', 'math', 'visualization', 'verification', 'interactive'];
                const scrollPos = window.pageYOffset + 100;
                
                sections.forEach(sectionId => {
                    const section = document.getElementById(sectionId);
                    if (section) {
                        const sectionTop = section.offsetTop;
                        const sectionHeight = section.offsetHeight;
                        
                        if (scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight) {
                            navItems.forEach(nav => nav.classList.remove('active'));
                            const activeNav = document.querySelector(`[href="#${sectionId}"]`);
                            if (activeNav) activeNav.classList.add('active');
                        }
                    }
                });
            });
        }
        
        // 3Då¯è§†åŒ–åˆå§‹åŒ–
        function init3DVisualization() {
            // çƒä½“åœºæ™¯
            initSphereScene();
            // æŠ•å½±åœºæ™¯
            initProjectionScene();
            
            // å¼€å§‹æ¸²æŸ“å¾ªç¯
            animate();
        }
        
        function initSphereScene() {
            const container = document.getElementById('sphere3d');
            const width = container.clientWidth;
            const height = container.clientHeight;
            
            // åœºæ™¯
            sphereScene = new THREE.Scene();
            sphereScene.background = new THREE.Color(0x1e3c72);
            
            // ç›¸æœº
            sphereCamera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
            sphereCamera.position.set(5, 5, 5);
            
            // æ¸²æŸ“å™¨
            sphereRenderer = new THREE.WebGLRenderer({ antialias: true });
            sphereRenderer.setSize(width, height);
            container.appendChild(sphereRenderer.domElement);
            
            // æ§åˆ¶å™¨
            sphereControls = new THREE.OrbitControls(sphereCamera, sphereRenderer.domElement);
            sphereControls.enableDamping = true;
            
            // æ·»åŠ çƒä½“
            const sphereGeometry = new THREE.SphereGeometry(2, 32, 32);
            const sphereMaterial = new THREE.MeshPhongMaterial({
                color: 0x4fc3f7,
                transparent: true,
                opacity: 0.7,
                wireframe: false
            });
            const sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
            sphereScene.add(sphere);
            
            // æ·»åŠ åœºçº¿
            addFieldLines(sphereScene);
            
            // æ·»åŠ å…‰æº
            const light = new THREE.DirectionalLight(0xffffff, 1);
            light.position.set(5, 5, 5);
            sphereScene.add(light);
            
            const ambientLight = new THREE.AmbientLight(0x404040, 0.4);
            sphereScene.add(ambientLight);
        }
        
        function initProjectionScene() {
            const container = document.getElementById('projection3d');
            const width = container.clientWidth;
            const height = container.clientHeight;
            
            // åœºæ™¯
            projectionScene = new THREE.Scene();
            projectionScene.background = new THREE.Color(0x2a5298);
            
            // ç›¸æœº
            projectionCamera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
            projectionCamera.position.set(5, 5, 5);
            
            // æ¸²æŸ“å™¨
            projectionRenderer = new THREE.WebGLRenderer({ antialias: true });
            projectionRenderer.setSize(width, height);
            container.appendChild(projectionRenderer.domElement);
            
            // æ§åˆ¶å™¨
            projectionControls = new THREE.OrbitControls(projectionCamera, projectionRenderer.domElement);
            projectionControls.enableDamping = true;
            
            // æ·»åŠ æŠ•å½±æ¼”ç¤º
            addProjectionDemo(projectionScene);
            
            // æ·»åŠ å…‰æº
            const light = new THREE.DirectionalLight(0xffffff, 1);
            light.position.set(5, 5, 5);
            projectionScene.add(light);
            
            const ambientLight = new THREE.AmbientLight(0x404040, 0.4);
            projectionScene.add(ambientLight);
        }
        
        function addFieldLines(scene) {
            const fieldLinesMaterial = new THREE.LineBasicMaterial({ color: 0xff6b6b });
            
            // åˆ›å»ºå¾„å‘åœºçº¿
            for (let i = 0; i < 12; i++) {
                const theta = (i / 12) * Math.PI * 2;
                const phi = Math.PI / 4;
                
                const points = [];
                for (let r = 2; r <= 4; r += 0.5) {
                    const x = r * Math.sin(phi) * Math.cos(theta);
                    const y = r * Math.sin(phi) * Math.sin(theta);
                    const z = r * Math.cos(phi);
                    points.push(new THREE.Vector3(x, y, z));
                }
                
                const geometry = new THREE.BufferGeometry().setFromPoints(points);
                const line = new THREE.Line(geometry, fieldLinesMaterial);
                scene.add(line);
            }
        }
        
        function addProjectionDemo(scene) {
            // æ·»åŠ çƒä½“
            const sphereGeometry = new THREE.SphereGeometry(1.5, 32, 32);
            const sphereMaterial = new THREE.MeshPhongMaterial({
                color: 0x4fc3f7,
                transparent: true,
                opacity: 0.5
            });
            const sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
            sphere.position.set(-2, 0, 0);
            scene.add(sphere);
            
            // æ·»åŠ æŠ•å½±å¹³é¢
            const planeGeometry = new THREE.PlaneGeometry(3, 3);
            const planeMaterial = new THREE.MeshPhongMaterial({
                color: 0x66bb6a,
                transparent: true,
                opacity: 0.7,
                side: THREE.DoubleSide
            });
            const plane = new THREE.Mesh(planeGeometry, planeMaterial);
            plane.position.set(2, 0, 0);
            plane.rotation.y = Math.PI / 2;
            scene.add(plane);
            
            // æ·»åŠ æŠ•å½±çº¿
            const projectionMaterial = new THREE.LineBasicMaterial({ color: 0xffa726 });
            for (let i = 0; i < 8; i++) {
                const angle = (i / 8) * Math.PI * 2;
                const startX = -2 + 1.5 * Math.cos(angle);
                const startY = 1.5 * Math.sin(angle);
                const endX = 2;
                const endY = startY;
                
                const points = [
                    new THREE.Vector3(startX, startY, 0),
                    new THREE.Vector3(endX, endY, 0)
                ];
                
                const geometry = new THREE.BufferGeometry().setFromPoints(points);
                const line = new THREE.Line(geometry, projectionMaterial);
                scene.add(line);
            }
        }
        
        function animate() {
            requestAnimationFrame(animate);
            
            if (animationEnabled) {
                // æ—‹è½¬åŠ¨ç”»
                if (sphereScene) {
                    sphereScene.children.forEach(child => {
                        if (child.type === 'Mesh' || child.type === 'Line') {
                            child.rotation.y += 0.005;
                        }
                    });
                }
                
                if (projectionScene) {
                    projectionScene.children.forEach(child => {
                        if (child.type === 'Mesh' && child.material.color.getHex() === 0x4fc3f7) {
                            child.rotation.y += 0.01;
                        }
                    });
                }
            }
            
            // æ›´æ–°æ§åˆ¶å™¨
            if (sphereControls) sphereControls.update();
            if (projectionControls) projectionControls.update();
            
            // æ¸²æŸ“
            if (sphereRenderer && sphereScene && sphereCamera) {
                sphereRenderer.render(sphereScene, sphereCamera);
            }
            if (projectionRenderer && projectionScene && projectionCamera) {
                projectionRenderer.render(projectionScene, projectionCamera);
            }
        }
        
        // æ§åˆ¶å‡½æ•°
        function resetView(type) {
            if (type === 'sphere' && sphereCamera) {
                sphereCamera.position.set(5, 5, 5);
                sphereControls.reset();
            } else if (type === 'projection' && projectionCamera) {
                projectionCamera.position.set(5, 5, 5);
                projectionControls.reset();
            }
        }
        
        function toggleAnimation(type) {
            animationEnabled = !animationEnabled;
        }
        
        // å›¾è¡¨åˆå§‹åŒ–
        function initCharts() {
            // æ–¹æ³•å¯¹æ¯”å›¾
            const ctx1 = document.getElementById('methodComparisonChart').getContext('2d');
            new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: ['åŒé‡ç«‹ä½“è§’ç§¯åˆ†', 'ç«‹ä½“è§’æ¯”å€¼æ³•', 'å¾®åˆ†å‡ ä½•æ³•', 'è’™ç‰¹å¡ç½—æ³•'],
                    datasets: [{
                        label: 'å‡ ä½•å› å­å€¼',
                        data: [2.0, 2.0, 2.0, 2.0],
                        backgroundColor: [
                            'rgba(54, 162, 235, 0.8)',
                            'rgba(255, 99, 132, 0.8)',
                            'rgba(75, 192, 192, 0.8)',
                            'rgba(153, 102, 255, 0.8)'
                        ],
                        borderColor: [
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 99, 132, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        title: {
                            display: true,
                            text: 'å››ç§æ–¹æ³•éªŒè¯ç»“æœå®Œå…¨ä¸€è‡´',
                            font: { size: 16 }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 3,
                            title: { display: true, text: 'å‡ ä½•å› å­å€¼' }
                        }
                    }
                }
            });
            
            // è¯¯å·®åˆ†æå›¾
            const ctx2 = document.getElementById('errorAnalysisChart').getContext('2d');
            new Chart(ctx2, {
                type: 'line',
                data: {
                    labels: ['0.5', '1.0', '1.5', '2.0', '2.5', '3.0'],
                    datasets: [{
                        label: 'ç›¸å¯¹è¯¯å·® (%)',
                        data: [75, 50, 25, 0, 25, 50],
                        borderColor: 'rgba(255, 99, 132, 1)',
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        borderWidth: 3,
                        pointBackgroundColor: 'rgba(255, 99, 132, 1)',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 8,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'åªæœ‰å‡ ä½•å› å­=2æ—¶è¯¯å·®ä¸º0',
                            font: { size: 16 }
                        }
                    },
                    scales: {
                        x: { title: { display: true, text: 'å‡ ä½•å› å­å€¼' } },
                        y: { title: { display: true, text: 'ç›¸å¯¹è¯¯å·® (%)' } }
                    }
                }
            });
            
            // è·¨å­¦ç§‘éªŒè¯å›¾
            const ctx3 = document.getElementById('crossDisciplinaryChart').getContext('2d');
            new Chart(ctx3, {
                type: 'radar',
                data: {
                    labels: ['æ ¸ç‰©ç†', 'ç»Ÿè®¡ç‰©ç†', 'å…‰å­¦', 'æµä½“åŠ›å­¦', 'å¼•åŠ›ç†è®º', 'ç”µç£ç†è®º'],
                    datasets: [{
                        label: 'å‡ ä½•å› å­éªŒè¯',
                        data: [2, 2, 2, 2, 2, 2],
                        borderColor: 'rgba(75, 192, 192, 1)',
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderWidth: 3,
                        pointBackgroundColor: 'rgba(75, 192, 192, 1)',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'è·¨å­¦ç§‘ä¸€è‡´æ€§éªŒè¯',
                            font: { size: 16 }
                        }
                    },
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 3,
                            ticks: { stepSize: 0.5 }
                        }
                    }
                }
            });
            
            // ç²¾åº¦éªŒè¯å›¾
            const ctx4 = document.getElementById('precisionChart').getContext('2d');
            new Chart(ctx4, {
                type: 'doughnut',
                data: {
                    labels: ['ç†è®ºå€¼', 'å®éªŒè¯¯å·®'],
                    datasets: [{
                        data: [100, 0],
                        backgroundColor: [
                            'rgba(40, 167, 69, 0.8)',
                            'rgba(220, 53, 69, 0.8)'
                        ],
                        borderColor: [
                            'rgba(40, 167, 69, 1)',
                            'rgba(220, 53, 69, 1)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'ç†è®ºä¸å®éªŒå»åˆåº¦: 100%',
                            font: { size: 16 }
                        },
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }
        
        // äº¤äº’å¼æ¼”ç¤º
        function initInteractiveDemo() {
            const geometricFactorSlider = document.getElementById('geometricFactor');
            const zhangConstantSlider = document.getElementById('zhangConstant');
            const lightSpeedSlider = document.getElementById('lightSpeed');
            
            const geometricFactorValue = document.getElementById('geometricFactorValue');
            const zhangConstantValue = document.getElementById('zhangConstantValue');
            const lightSpeedValue = document.getElementById('lightSpeedValue');
            
            const calculationResult = document.getElementById('calculationResult');
            const errorResult = document.getElementById('errorResult');
            
            // å®æ—¶å›¾è¡¨
            const ctx = document.getElementById('realTimeChart').getContext('2d');
            const realTimeChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'è®¡ç®—çš„Gå€¼',
                        data: [],
                        borderColor: 'rgba(54, 162, 235, 1)',
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        borderWidth: 2,
                        tension: 0.4
                    }, {
                        label: 'CODATAæ ‡å‡†å€¼',
                        data: [],
                        borderColor: 'rgba(255, 99, 132, 1)',
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        borderWidth: 2,
                        borderDash: [5, 5]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'å®æ—¶è®¡ç®—ç»“æœå¯¹æ¯”',
                            font: { size: 16 }
                        }
                    },
                    scales: {
                        x: { title: { display: true, text: 'æ—¶é—´' } },
                        y: { 
                            title: { display: true, text: 'Gå€¼ (Ã—10â»Â¹Â¹)' },
                            min: 3,
                            max: 10
                        }
                    }
                }
            });
            
            let dataPoints = 0;
            const maxDataPoints = 50;
            const codataValue = 6.67430;
            
            function updateCalculation() {
                const geometricFactor = parseFloat(geometricFactorSlider.value);
                const zhangConstant = parseFloat(zhangConstantSlider.value) * 0.01;
                const lightSpeed = parseFloat(lightSpeedSlider.value) * 1e8;
                
                // æ›´æ–°æ˜¾ç¤ºå€¼
                geometricFactorValue.textContent = geometricFactor.toFixed(1);
                zhangConstantValue.textContent = zhangConstantSlider.value;
                lightSpeedValue.textContent = lightSpeedSlider.value;
                
                // è®¡ç®—Gå€¼
                const calculatedG = (geometricFactor * zhangConstant) / lightSpeed * 1e11;
                const relativeError = Math.abs((calculatedG - codataValue) / codataValue * 100);
                
                // æ›´æ–°ç»“æœæ˜¾ç¤º
                calculationResult.textContent = `G = ${calculatedG.toFixed(3)} Ã— 10â»Â¹Â¹ mÂ³Â·kgâ»Â¹Â·sâ»Â²`;
                errorResult.textContent = `ç›¸å¯¹è¯¯å·®: ${relativeError.toFixed(2)}%`;
                errorResult.style.color = relativeError < 1 ? '#28a745' : '#dc3545';
                
                // æ›´æ–°å›¾è¡¨
                const currentTime = new Date().toLocaleTimeString();
                realTimeChart.data.labels.push(currentTime);
                realTimeChart.data.datasets[0].data.push(calculatedG);
                realTimeChart.data.datasets[1].data.push(codataValue);
                
                if (realTimeChart.data.labels.length > maxDataPoints) {
                    realTimeChart.data.labels.shift();
                    realTimeChart.data.datasets[0].data.shift();
                    realTimeChart.data.datasets[1].data.shift();
                }
                
                realTimeChart.update('none');
                dataPoints++;
            }
            
            // ç»‘å®šäº‹ä»¶ç›‘å¬å™¨
            geometricFactorSlider.addEventListener('input', updateCalculation);
            zhangConstantSlider.addEventListener('input', updateCalculation);
            lightSpeedSlider.addEventListener('input', updateCalculation);
            
            // åˆå§‹è®¡ç®—
            updateCalculation();
            
            // å®šæœŸæ›´æ–°å›¾è¡¨ï¼ˆå³ä½¿å‚æ•°ä¸å˜ï¼‰
            setInterval(() => {
                if (dataPoints % 10 === 0) { // æ¯10æ¬¡æ›´æ–°ä¸€æ¬¡
                    updateCalculation();
                }
            }, 1000);
        }
        
        // å“åº”å¼å¤„ç†
        window.addEventListener('resize', () => {
            if (sphereRenderer && sphereCamera) {
                const container = document.getElementById('sphere3d');
                const width = container.clientWidth;
                const height = container.clientHeight;
                
                sphereCamera.aspect = width / height;
                sphereCamera.updateProjectionMatrix();
                sphereRenderer.setSize(width, height);
            }
            
            if (projectionRenderer && projectionCamera) {
                const container = document.getElementById('projection3d');
                const width = container.clientWidth;
                const height = container.clientHeight;
                
                projectionCamera.aspect = width / height;
                projectionCamera.updateProjectionMatrix();
                projectionRenderer.setSize(width, height);
            }
        });
        
        // å¹³æ»‘æ»šåŠ¨åˆ°é”šç‚¹
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>